(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(70)},37:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);a(37);var r=a(0),n=a.n(r),s=a(32),c=a.n(s),o=a(33),i=a(17),l=a(4),u=a(11),d=a(2),m="REQUEST_FAILED",p="REQUEST_SUCCEEDED",_={items:[],currentDate:!0,selectedDate:"",itemsSubset:[]},f={error:"",message:"",loading:!1,activeLink:"",showModal:!1},h={items:[],selectedItem:null},v={items:[],selectedItem:null},E=Object(i.c)({store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TO_CURRENT_STATE":return function(e){return Object(d.a)({},e,{currentDate:!0,selectedDate:""})}(e);case"FETCH_SUBSET_DATA":return function(e,t){var a=t.items,r=t.date;return Object(d.a)({},e,{currentDate:!1,itemsSubset:a,selectedDate:r})}(e,t);case"UPDATE_STORE_ITEM_AMOUNT":return function(e,t){var a=t.id,r=t.amount,n=t.increase,s=Object(u.a)(e.items),c=s.findIndex(function(e){return e.id===a}),o=Object(d.a)({},s[c]);return n?o.available+=+r:o.available-=+r,s[c]=o,Object(d.a)({},e,{items:s})}(e,t);case"FETCH_STORE_DATA":return function(e,t){var a=t.items;return Object(d.a)({},e,{items:a})}(e,t);case"ADD_STORE_ITEM":return function(e,t){var a=t.item;a.sold=0,a.bought=0;var r=[].concat(Object(u.a)(e.items),[a]);return Object(d.a)({},e,{items:r})}(e,t);case"UPDATE_STORE_ITEM":return function(e,t){var a=t.item,r=Object(u.a)(e.items),n=r.findIndex(function(e){return e.id===a.id});return r[n]=a,Object(d.a)({},e,{items:r})}(e,t);case"DELETE_STORE_ITEM":return function(e,t){var a=t.id,r=e.items.filter(function(e){return e.id!==a});return Object(d.a)({},e,{items:r})}(e,t);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MODAL":return function(e,t){var a=t.showModal;return Object(d.a)({},e,{showModal:a})}(e,t);case"SET_ACTIVE_LINK":return function(e,t){var a=t.linkname;return Object(d.a)({},e,{activeLink:a})}(e,t);case"REQUEST_INITIALIZED":return function(e){return Object(d.a)({},e,{loading:!0,error:"",message:""})}(e);case m:return function(e,t){var a=t.error;return Object(d.a)({},e,{loading:!1,error:a})}(e,t);case p:return function(e,t){var a=t.message;return Object(d.a)({},e,{message:a,error:"",loading:!1})}(e,t);case"DISMISS_ERROR":return function(e){return Object(d.a)({},e,{error:""})}(e);case"DISMISS_MESSAGE":return function(e){return Object(d.a)({},e,{message:""})}(e);default:return e}},receipts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_RECEIPT":return function(e,t){var a=t.id,r=e.items.filter(function(e){return e.id!==a});return Object(d.a)({},e,{items:r})}(e,t);case"DELETE_RECEIPT_ITEM":return function(e,t){var a=t.receiptId,r=t.storeItemId,n=Object(u.a)(e.items),s=n.findIndex(function(e){return+e.id===+a}),c=n.find(function(e){return+e.id===+a}),o=c.storeItems.filter(function(e){return e.id!==r});return c.storeItems=o,n[s]=c,Object(d.a)({},e,{items:n,selectedItem:c})}(e,t);case"ADD_RECEIPT_ITEM":return function(e,t){var a=t.receiptId,r=t.storeItemId,n=t.name,s=t.code,c=t.amount,o=t.inp_price,i=Object(u.a)(e.items),l=i.findIndex(function(e){return e.id===a}),m=Object(d.a)({},i[l]);m.storeItems||(m.storeItems=[]);var p=[].concat(Object(u.a)(m.storeItems),[{id:r,code:s,name:n,amount:c,inp_price:o}]);return m.storeItems=p,i[l]=m,Object(d.a)({},e,{items:i,selectedItem:m})}(e,t);case"UPDATE_RECEIPT_HEADER":return function(e,t){var a=t.item,r=Object(u.a)(e.items),n=e.items.findIndex(function(e){return e.id===a.id}),s=Object(d.a)({},e.items.find(function(e){return e.id===a.id}),a);return r[n]=s,Object(d.a)({},e,{items:r})}(e,t);case"ADD_RECEIPT_HEADER":return function(e,t){var a=t.item,r=[].concat(Object(u.a)(e.items),[a]);return Object(d.a)({},e,{items:r})}(e,t);case"CHANGE_SELECTED_RECEIPT":return function(e,t){var a=t.id,r=e.items.find(function(e){return e.id===a});return Object(d.a)({},e,{selectedItem:r})}(e,t);case"FETCH_RECEIPT":return function(e,t){var a,r=t.item,n=Object(u.a)(e.items),s=n.findIndex(function(e){return+r.id===e.id});return s>-1?((a=Object(d.a)({},n[s])).storeItems=r.storeItems,n[s]=a):(a=r,n.push(r)),Object(d.a)({},e,{items:n,selectedItem:r})}(e,t);case"FETCH_RECEIPTS":return function(e,t){var a,r=t.items,n=e.items[0];return a=n?[].concat(Object(u.a)(e.items.filter(function(e){return e.id!==n.id})),[n]):r,Object(d.a)({},e,{items:a})}(e,t);default:return e}},issueCards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_ISSUE_CARD":return function(e,t){var a=t.id,r=e.items.filter(function(e){return e.id!==a});return Object(d.a)({},e,{items:r})}(e,t);case"DELETE_ISSUE_CARD_ITEM":return function(e,t){var a=t.issueCardId,r=t.storeItemId,n=Object(u.a)(e.items),s=n.findIndex(function(e){return+e.id===+a}),c=n.find(function(e){return+e.id===+a}),o=c.storeItems.filter(function(e){return e.id!==r});return c.storeItems=o,n[s]=c,Object(d.a)({},e,{items:n,selectedItem:c})}(e,t);case"ADD_ISSUE_CARD_ITEM":return function(e,t){var a=t.issueCardId,r=t.storeItemId,n=t.name,s=t.code,c=t.amount,o=Object(u.a)(e.items),i=o.findIndex(function(e){return e.id===a}),l=Object(d.a)({},o[i]);l.storeItems||(l.storeItems=[]);var m=[].concat(Object(u.a)(l.storeItems),[{id:r,code:s,name:n,amount:c}]);return l.storeItems=m,o[i]=l,Object(d.a)({},e,{items:o,selectedItem:l})}(e,t);case"UPDATE_ISSUE_CARD_HEADER":return function(e,t){var a=t.item,r=Object(u.a)(e.items),n=e.items.findIndex(function(e){return e.id===a.id}),s=Object(d.a)({},e.items.find(function(e){return e.id===a.id}),a);return r[n]=s,Object(d.a)({},e,{items:r})}(e,t);case"ADD_ISSUE_CARD_HEADER":return function(e,t){var a=t.item,r=[].concat(Object(u.a)(e.items),[a]);return Object(d.a)({},e,{items:r})}(e,t);case"CHANGE_SELECTED_ISSUE_CARD":return function(e,t){var a=t.id,r=e.items.find(function(e){return e.id===a});return Object(d.a)({},e,{selectedItem:r})}(e,t);case"FETCH_ISSUE_CARD":return function(e,t){var a,r=t.item,n=Object(u.a)(e.items),s=n.findIndex(function(e){return+r.id===e.id});return s>-1?((a=Object(d.a)({},n[s])).storeItems=r.storeItems,n[s]=a):(a=r,n.push(r)),Object(d.a)({},e,{items:n,selectedItem:r})}(e,t);case"FETCH_ISSUE_CARDS":return function(e,t){var a,r=t.items,n=e.items[0];return a=n?[].concat(Object(u.a)(e.items.filter(function(e){return e.id!==n.id})),[n]):r,Object(d.a)({},e,{items:a})}(e,t);default:return e}}}),b=a(5),I=a(6),g=a(8),y=a(7),N=a(9),k=a(72),C=a(73),x=a(3),O=a.n(x),j=a(10),S=a(19),w=a.n(S),T=w.a.create({baseURL:"http://ec2-54-87-42-106.compute-1.amazonaws.com:5000/goods"}),D=function(){return function(){var e=Object(j.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_INITIALIZED"}),e.prev=1,e.next=4,T.get("");case 4:a=e.sent,t({type:"FETCH_STORE_DATA",items:a.data}),t({type:p,message:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:m,error:"nepodarilo sa ziskat data"});case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},A=w.a.create({baseURL:"http://ec2-54-87-42-106.compute-1.amazonaws.com:5000/receipts"}),R=function(){return function(){var e=Object(j.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_INITIALIZED"}),e.prev=1,e.next=4,A();case 4:a=e.sent,t({type:"FETCH_RECEIPTS",items:a.data}),t({type:p,message:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:m,error:"nepodarilo sa ziskat data"});case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},M=w.a.create({baseURL:"http://ec2-54-87-42-106.compute-1.amazonaws.com:5000/issue-cards"}),H=function(){return function(){var e=Object(j.a)(O.a.mark(function e(t){var a;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_INITIALIZED"}),e.prev=1,e.next=4,M();case 4:a=e.sent,t({type:"FETCH_ISSUE_CARDS",items:a.data}),t({type:p,message:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:m,error:"nepodarilo sa ziskat data"});case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},L=function(e){return{type:"SET_ACTIVE_LINK",linkname:e}},F=function(e){return{type:"TOGGLE_MODAL",showModal:e}},U=a(71);function z(e,t){var a="";return t===e&&(a=" nav__link--active"),"nav__link"+a}var P=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return n.a.createElement("nav",{className:"nav"},n.a.createElement("ul",{className:"nav__list"},n.a.createElement("li",{className:"nav__item"},n.a.createElement(U.a,{className:z("/",this.props.activeLink),to:"/"},"domov")),n.a.createElement("li",{className:"nav__item nav__item--title"},"SKLAD"),n.a.createElement("li",{className:"nav__item"},n.a.createElement(U.a,{className:z("store",this.props.activeLink),to:"/store"},"zobrazit skladove polozky")),n.a.createElement("li",{className:"nav__item"},n.a.createElement(U.a,{className:z("store_add",this.props.activeLink),to:"/store/add-item"},"pridat polozku")),n.a.createElement("li",{className:"nav__item nav__item--title"},"PRIJEMKY"),n.a.createElement("li",{className:"nav__item"},n.a.createElement(U.a,{className:z("receipts",this.props.activeLink),to:"/receipts"},"zobrazit prijemky")),n.a.createElement("li",{className:"nav__item"},n.a.createElement(U.a,{className:z("receipts_add",this.props.activeLink),to:"/receipts/add"},"vytvorit prijemku")),n.a.createElement("li",{className:"nav__item nav__item--title"},"VYDAJKY"),n.a.createElement("li",{className:"nav__item"},n.a.createElement(U.a,{className:z("issueCards",this.props.activeLink),to:"/issue-cards"},"zobrazit vydajky")),n.a.createElement("li",{className:"nav__item"},n.a.createElement(U.a,{className:z("issueCards_add",this.props.activeLink),to:"/issue-cards/add"},"vytvorit vydajku"))))}}]),t}(r.Component),Q=Object(l.b)(function(e){return{activeLink:e.app.activeLink}})(P),Z=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={date:""},a.inputChangeHandler=function(e){a.setState({date:e.target.value})},a.submitFormHandler=function(e){e.preventDefault(),a.state.date!==a.props.selectedDate&&a.props.onFetchSubsetData(a.state.date)},a.changeToCurrentStateHandler=function(){a.props.currentDate||a.props.onChangeToCurrentState()},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"date-search-box"},n.a.createElement("p",{className:"date-search-box__text"},n.a.createElement("span",{className:"date-search-box__text--darker"},"stav ku dnu:"," "),this.props.currentDate?"dnesny den":this.props.selectedDate),n.a.createElement("form",{onSubmit:this.submitFormHandler},n.a.createElement("input",{className:"date-search-box__input",type:"date",name:"date",value:this.state.date,onChange:this.inputChangeHandler,required:!0}),n.a.createElement("button",{className:"btn btn--outline-violet btn--small u-margin-left-xsm",type:"submit"},"zmenit datum")),n.a.createElement("button",{className:this.props.currentDate?"btn btn--small u-margin-left-xsm":"btn btn--outline-violet btn--small u-margin-left-xsm",onClick:this.changeToCurrentStateHandler},"sucasny stav"))}}]),t}(r.Component),B=Object(l.b)(function(e){return{currentDate:e.store.currentDate,selectedDate:e.store.selectedDate}},function(e){return{onChangeToCurrentState:function(){return e({type:"CHANGE_TO_CURRENT_STATE"})},onFetchSubsetData:function(t){return e(function(e){return function(){var t=Object(j.a)(O.a.mark(function t(a){var r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_INITIALIZED"}),t.prev=1,t.next=4,T("?date=".concat(e));case 4:r=t.sent,a({type:"FETCH_SUBSET_DATA",items:r.data,date:e}),a({type:p}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:m,error:"nepodarilo sa ziskat data"});case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(Z),q=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).deleteItemHandler=function(e){a.props.onDeleteStoreItem(e)},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.items&&this.props.items.length||this.props.onFetchStoreData(),this.props.onSetActiveLink("store")}},{key:"renderItems",value:function(){var e=this;return this.props.currentDate?this.props.items?this.props.items.map(function(t){return n.a.createElement("div",{key:t.id,className:"product-box__row"},n.a.createElement("div",{className:"product-box__col"},t.code),n.a.createElement("div",{className:"product-box__col"},t.name),n.a.createElement("div",{className:"product-box__col"},t.sellingPrice),n.a.createElement("div",{className:"product-box__col"},t.available),n.a.createElement("div",{className:"product-box__col"},n.a.createElement(U.a,{className:"btn btn--small",to:"/store/add-item?id=".concat(t.id,"&name=").concat(t.name,"&code=").concat(t.code,"&selling-price=").concat(t.sellingPrice)},"upravit"),n.a.createElement("button",{className:"btn btn--danger btn--small u-margin-left-xsm",onClick:e.deleteItemHandler.bind(null,t.id)},"odstranit")))}):null:this.props.itemsSubset?this.props.itemsSubset.map(function(e){return n.a.createElement("div",{key:e.id,className:"product-box__row"},n.a.createElement("div",{className:"product-box__col"},e.code),n.a.createElement("div",{className:"product-box__col"},e.name),n.a.createElement("div",{className:"product-box__col"},e.available))}):null}},{key:"renderHeader",value:function(){return this.props.currentDate?n.a.createElement("div",{className:"product-box"},n.a.createElement("div",{className:"product-box__row product-box__row--header"},n.a.createElement("div",{className:"product-box__col product-box__col--header"},"kod"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"nazov"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"predajna cena"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"kusov na sklade"),n.a.createElement("div",{className:"product-box__col product-box__col--header"})),this.renderItems()):n.a.createElement("div",{className:"product-box"},n.a.createElement("div",{className:"product-box__row product-box__row--header"},n.a.createElement("div",{className:"product-box__col product-box__col--header"},"kod"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"nazov"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"kusov na sklade")),this.renderItems())}},{key:"render",value:function(){return n.a.createElement("div",{className:"wrapper u-margin-top-lg"},n.a.createElement(B,null),this.renderHeader())}}]),t}(r.Component),G=Object(l.b)(function(e){return{loading:e.app.loading,items:e.store.items,currentDate:e.store.currentDate,itemsSubset:e.store.itemsSubset}},function(e){return{onFetchStoreData:function(){return e(D())},onDeleteStoreItem:function(t){return e(function(e){return function(){var t=Object(j.a)(O.a.mark(function t(a){return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_INITIALIZED"}),t.prev=1,t.next=4,T.delete("/".concat(e));case 4:a({type:"DELETE_STORE_ITEM",id:e}),a({type:p,message:"polozka bola uspesne odstranena"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:m,error:"odstanenie polozky zlyhalo, na polozku sa odkazuje iny dokument"});case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(e){return t.apply(this,arguments)}}()}(t))},onSetActiveLink:function(t){return e(L(t))}}})(q),K=function(e){var t=e.split("?")[1];return t?t.split("&").reduce(function(e,t){var a=t.split("=");return e[a[0]]=a[1],e},{}):null},V=(a(68),function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={fields:{id:null,code:"",name:"",sellingPrice:0},update:!1},a.inputChangeHandler=function(e){var t=e.target.name,r=Object(d.a)({},a.state.fields);r[t]=e.target.value,a.setState({fields:r})},a.formSubmitHandler=function(e){e.preventDefault(),a.props.openedInModal?a.props.onAddStoreItem(a.state.fields.code,a.state.fields.name,a.state.fields.sellingPrice,function(){a.props.onToggleModal(!1)}):a.state.update?a.props.onUpdateStoreItem(a.state.fields.id,a.state.fields.code,a.state.fields.name,a.state.fields.sellingPrice,function(){a.props.history.replace("/store")}):a.props.onAddStoreItem(a.state.fields.code,a.state.fields.name,a.state.fields.sellingPrice,function(){a.props.history.replace("/store")})},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){if(this.props.history){var e=K(this.props.history.location.search);if(e){var t=Object(d.a)({},this.state.fields);t.id=e.id,t.name=e.name,t.code=e.code,t.sellingPrice=e["selling-price"],this.setState({update:!0,fields:t})}}if(this.props.openedInModal){var a=Object(d.a)({},this.state.fields);a.code=this.props.code,this.setState({fields:a})}this.props.onSetActiveLink("store_add")}},{key:"render",value:function(){var e=["u-margin-top-lg"];return this.props.openedInModal||(e.push("wrapper--md"),e.push("wrapper")),n.a.createElement("div",{className:e.join(" ")},n.a.createElement("form",{className:"col-form",onSubmit:this.formSubmitHandler},n.a.createElement("div",{className:"col-form__header"},"Pridat polozku"),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label",htmlFor:"add-item-code"},"kod"),n.a.createElement("input",{className:"col-form__input",name:"code",id:"add-item-code",type:"text",required:!0,autoFocus:!0,value:this.state.fields.code,onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label",htmlFor:"add-item-name"},"nazov"),n.a.createElement("input",{className:"col-form__input",name:"name",id:"add-item-name",type:"text",required:!0,autoFocus:!0,value:this.state.fields.name,onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label",htmlFor:"add-item-sellingPrice"},"predajna cena"),n.a.createElement("input",{className:"col-form__input",name:"sellingPrice",id:"add-item-sellingPrice",type:"number",step:.01,required:!0,autoFocus:!0,value:this.state.fields.sellingPrice,onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("button",{className:"col-form__btn--submit",type:"submit"},this.state.update?"upravit":"pridat"))))}}]),t}(r.Component)),J=Object(l.b)(function(e){return{loading:e.store.loading,error:e.store.error}},function(e){return{onAddStoreItem:function(t,a,r,n){return e(function(e,t,a,r){return function(){var n=Object(j.a)(O.a.mark(function n(s){var c,o;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s({type:"REQUEST_INITIALIZED"}),n.prev=1,c={code:e,name:t,sellingPrice:a},n.next=5,T.post("",c);case 5:o=n.sent,c.id=o.data.insertId,s({type:"ADD_STORE_ITEM",item:c}),s({type:p,message:"polozka [".concat(c.code," - ").concat(c.name,"] bola uspesne pridana")}),"function"===typeof r&&r(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),s({type:m,error:"pridanie polozky zlyhalo"});case 15:case"end":return n.stop()}},n,this,[[1,12]])}));return function(e){return n.apply(this,arguments)}}()}(t,a,r,n))},onUpdateStoreItem:function(t,a,r,n,s){return e(function(e,t,a,r,n){return function(){var s=Object(j.a)(O.a.mark(function s(c){var o;return O.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c({type:"REQUEST_INITIALIZED"}),s.prev=1,o={id:+e,code:t,name:a,sellingPrice:+r},s.next=5,T.post("/update",o);case 5:c({type:"UPDATE_STORE_ITEM",item:o}),c({type:p,message:"polozka [".concat(o.code," - ").concat(o.name,"] bola uspesne upravena")}),"function"===typeof n&&n(),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),c({type:m,error:"uprava polozky zlyhala"});case 13:case"end":return s.stop()}},s,this,[[1,10]])}));return function(e){return s.apply(this,arguments)}}()}(t,a,r,n,s))},onSetActiveLink:function(t){return e(L(t))},onToggleModal:function(t){return e(F(t))}}})(V),X=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.receipts&&this.props.receipts.length||this.props.onFetchReceipt(),this.props.onSetActiveLink("receipts")}},{key:"renderReceipt",value:function(){return this.props.receipts?this.props.receipts.map(function(e){return n.a.createElement("div",{key:e.id,className:"product-box__row"},n.a.createElement("div",{className:"product-box__col"},e.identifier),n.a.createElement("div",{className:"product-box__col"},e.company),n.a.createElement("div",{className:"product-box__col"},e.date.split("T")[0]),n.a.createElement("div",{className:"product-box__col"},e.price),n.a.createElement("div",{className:"product-box__col"},n.a.createElement(U.a,{className:"btn btn--small",to:"/receipts/detail/".concat(e.id)},"detail")))}):null}},{key:"render",value:function(){return n.a.createElement("div",{className:"wrapper u-margin-top-lg"},n.a.createElement("div",{className:"product-box product-box--rounded-top"},n.a.createElement("div",{className:"product-box__row product-box__row--header"},n.a.createElement("div",{className:"product-box__col product-box__col--header"},"id"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"dodavatel"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"datum"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"cena"),n.a.createElement("div",{className:"product-box__col product-box__col--header"})),this.renderReceipt()))}}]),t}(r.Component),Y=Object(l.b)(function(e){return{loading:e.app.loading,receipts:e.receipts.items}},function(e){return{onFetchReceipt:function(){return e(R())},onSetActiveLink:function(t){return e(L(t))}}})(X),W=a(14),$=Object(l.b)(null,function(e){return{onToggleModal:function(t){return e(F(t))}}})(function(e){return n.a.createElement("div",{onClick:function(e){},className:"backdrop"},e.children)}),ee=Object(l.b)(null,function(e){return{onToggleModal:function(t){return e(F(t))}}})(function(e){return n.a.createElement("div",{className:"modal"},n.a.createElement("div",null,e.children),n.a.createElement("button",{onClick:e.onToggleModal.bind(null,!1),className:"modal__close-btn"},"X"))}),te=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={receiptId:a.props.receiptId,storeItemId:"",code:"",amount:0,inp_price:0,error:"",message:""},a.inputChangeHandler=function(e){var t,r=a.validateForm(e),n=r.error,s=r.message;a.setState((t={},Object(W.a)(t,e.target.name,e.target.value),Object(W.a)(t,"error",n),Object(W.a)(t,"message",s),t))},a.formSubmitHandler=function(e){if(e.preventDefault(),!a.state.error){var t=a.props.storeItems.find(function(e){return e.code===a.state.code});a.props.onAddReceiptItem(a.state.receiptId,t.id,a.state.amount,t.name,a.state.code,a.state.inp_price),a.props.hideFormHandler()}},a.createStoreItemHandler=function(e){a.props.onToggleModal(!0)},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.showModal&&!e.showModal){var a=this.validateCode(this.state.code),r=a.error,n=a.message;this.setState({error:r,message:n})}return!0}},{key:"validateCode",value:function(e){var t=this.state.error,a=this.state.message;if(!this.props.storeItems.map(function(e){return e.code}).includes(e)&&e.length>0)t=" ".concat(e," => neexistujuci kod"),a="";else if(e.length>0){t="";var r=this.props.storeItems.find(function(t){return t.code===e});a=" ".concat(r.code," => ").concat(r.name)}else t="",a="";return{error:t,message:a}}},{key:"validateForm",value:function(e){var t=this.state.error,a=this.state.message;return"code"===e.target.name?this.validateCode(e.target.value):{error:t,message:a}}},{key:"renderModal",value:function(){return this.props.showModal?n.a.createElement($,null,n.a.createElement(ee,null,n.a.createElement(J,{openedInModal:!0,code:this.state.code}))):null}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.renderModal(),n.a.createElement("div",{className:"row-form__wrapper"},n.a.createElement("form",{className:"row-form",onSubmit:this.formSubmitHandler},n.a.createElement("div",{className:"row-form__row row-form__row--header"},n.a.createElement("label",{className:"row-form__col row-form__col--header"},"kod"),n.a.createElement("label",{className:"row-form__col row-form__col--header"},"mnozstvo"),n.a.createElement("label",{className:"row-form__col row-form__col--header"},"nakupna cena")),n.a.createElement("div",{className:"row-form__row"},n.a.createElement("input",{className:"row-form__col row-form__input",type:"text",name:"code",required:!0,value:this.state.code,onChange:this.inputChangeHandler}),n.a.createElement("input",{className:"row-form__col row-form__input",type:"number",step:1,name:"amount",required:!0,value:this.state.amount,onChange:this.inputChangeHandler}),n.a.createElement("input",{className:"row-form__col row-form__input",type:"number",step:.01,name:"inp_price",required:!0,value:this.state.inp_price,onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"row-form__row"},n.a.createElement("button",{className:"row-form__col row-form__btn--submit",type:"submit"},"potvrdit"))),n.a.createElement("div",{className:"row-form__message"},this.state.error?n.a.createElement("div",{className:"row-form__col row-form__col--error"},n.a.createElement("p",null,this.state.error),n.a.createElement("button",{onClick:this.createStoreItemHandler,className:"row-form__message-btn row-form__message-btn--error"},"vytvorit polozku")):null,this.state.message?n.a.createElement("div",{className:"row-form__col row-form__col--success"},n.a.createElement("p",null,this.state.message)):null)))}}]),t}(r.Component),ae=Object(l.b)(function(e){return{storeItems:e.store.items,showModal:e.app.showModal}},function(e){return{onAddReceiptItem:function(t,a,r,n,s,c,o){return e(function(e,t,a,r,n,s,c){return function(){var o=Object(j.a)(O.a.mark(function o(i){return O.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i({type:"REQUEST_INITIALIZED"}),o.prev=1,o.next=4,A.post("/field",{receiptId:e,storeItemId:t,amount:a,inp_price:s});case 4:i({type:"ADD_RECEIPT_ITEM",receiptId:e,storeItemId:t,amount:a,name:r,code:n,inp_price:s}),i({type:p,message:"polozka bola uspesne pridana"}),i({type:"UPDATE_STORE_ITEM_AMOUNT",id:t,amount:a,increase:!0}),"function"===typeof c&&c(),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),i({type:m,error:"nepodarilo sa pridat polozku"});case 13:case"end":return o.stop()}},o,this,[[1,10]])}));return function(e){return o.apply(this,arguments)}}()}(t,a,r,n,s,c,o))},onToggleModal:function(t){return e(F(t))}}})(te),re=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={id:+a.props.history.location.pathname.split("/")[3],showForm:!1},a.hideFormHandler=function(){a.setState({showForm:!1})},a.deleteReceiptHandler=function(){a.props.selectedReceipt.storeItems&&a.props.selectedReceipt.storeItems.length?alert("vymazat je mozne iba prijemku ktora neobsahuje ziadne polozky"):a.props.onDeleteReceipt(a.state.id,function(){a.props.history.replace("/receipts")})},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.receipts.find(function(t){return t.id===e.state.id});t&&"storeItems"in t?this.props.onChangeSelectedReceipt(this.state.id):this.props.onFetchReceipt(this.state.id),this.props.onSetActiveLink("receipts")}},{key:"renderReceiptStoreItems",value:function(e){var t=this;if(e)return e.map(function(e){return n.a.createElement("div",{key:e.id,className:"product-box__row"},n.a.createElement("div",{className:"product-box__col"},e.code),n.a.createElement("div",{className:"product-box__col"},e.name),n.a.createElement("div",{className:"product-box__col"},e.amount),n.a.createElement("div",{className:"product-box__col"},e.inp_price),n.a.createElement("div",{className:"product-box__col"},n.a.createElement("button",{className:"btn btn--danger btn--small",onClick:function(){return t.props.onDeleteReceiptItem(t.props.selectedReceipt.id,e.id,e.amount)}},"odstanit")))})}},{key:"renderReceipt",value:function(){return this.props.selectedReceipt?n.a.createElement("div",{className:"card u-margin-top-lg"},n.a.createElement("div",{className:"card__header"},n.a.createElement("div",{className:"card__group u-margin-top-xsm"},n.a.createElement("p",{className:"card__text card__group--left"},"id: "),n.a.createElement("p",{className:"card__text card__group--right"},this.props.selectedReceipt.identifier)),n.a.createElement("div",{className:"card__group"},n.a.createElement("p",{className:"card__text card__group--left"},"dodavatel:"),n.a.createElement("p",{className:"card__text card__group--right"},this.props.selectedReceipt.company)),n.a.createElement("div",{className:"card__group"},n.a.createElement("p",{className:"card__text card__group--left"},"datum:"),n.a.createElement("p",{className:"card__text card__group--right"},this.props.selectedReceipt.date?this.props.selectedReceipt.date.split("T")[0]:null)),n.a.createElement("div",{className:"card__group"},n.a.createElement("p",{className:"card__text card__group--left"},"cena:"),n.a.createElement("p",{className:"card__text card__group--right"},this.props.selectedReceipt.price)),n.a.createElement(U.a,{className:"btn u-margin-left-sm u-margin-top-sm",to:"/issue-cards/add?id=".concat(this.props.selectedReceipt.id,"&identifier=").concat(this.props.selectedReceipt.identifier,"&date=").concat(this.props.selectedReceipt.date,"&company=").concat(this.props.selectedReceipt.company,"&price=").concat(this.props.selectedReceipt.price)},"upravit hlavicku"),n.a.createElement("button",{className:"btn btn--danger u-margin-left-xsm u-margin-top-sm",onClick:this.deleteReceiptHandler},"odstanit prijemku")),n.a.createElement("div",{className:"product-box"},n.a.createElement("div",{className:"product-box__row product-box__row--header"},n.a.createElement("div",{className:"product-box__col product-box__col--header"},"kod"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"nazov"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"mnozstvo"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"nakupna cena"),n.a.createElement("div",{className:"product-box__col product-box__col--header"})),this.renderReceiptStoreItems(this.props.selectedReceipt.storeItems))):null}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.renderReceipt(),n.a.createElement("div",{className:"wrapper u-margin-top-md"},this.state.showForm?n.a.createElement(ae,{receiptId:this.props.selectedReceipt.id,hideFormHandler:this.hideFormHandler}):null,n.a.createElement("button",{className:"btn btn--outline-blue u-margin-top-xsm",onClick:function(){return e.setState(function(e){return{showForm:!e.showForm}})}},this.state.showForm?"skryt formular":"pridat polozku")))}}]),t}(r.Component),ne=Object(l.b)(function(e){return{loading:e.app.loading,receipts:e.receipts.items,selectedReceipt:e.receipts.selectedItem}},function(e){return{onFetchReceipt:function(t){return e(function(e){return function(){var t=Object(j.a)(O.a.mark(function t(a){var r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_INITIALIZED"}),t.prev=1,t.next=4,A("/".concat(e));case 4:r=t.sent,a({type:"FETCH_RECEIPT",item:r.data}),a({type:p,message:""}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:m,error:"nepodarilo sa ziskat data"});case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()}(t))},onFetchReceipts:function(){return e(R())},onChangeSelectedReceipt:function(t){return e(function(e){return{type:"CHANGE_SELECTED_RECEIPT",id:e}}(t))},onDeleteReceiptItem:function(t,a,r){return e(function(e,t,a){return function(){var r=Object(j.a)(O.a.mark(function r(n){var s;return O.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:"REQUEST_INITIALIZED"}),r.prev=1,s={receiptId:e,storeItemId:t},r.next=5,A.delete("/field",{data:s});case 5:n(Object(d.a)({type:"DELETE_RECEIPT_ITEM"},s)),n({type:p,message:"polozka bola uspesne odstranena"}),n({type:"UPDATE_STORE_ITEM_AMOUNT",id:t,amount:a,increase:!1}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),n({type:m,error:"nepodarilo sa odstranit polozku"});case 13:case"end":return r.stop()}},r,this,[[1,10]])}));return function(e){return r.apply(this,arguments)}}()}(t,a,r))},onDeleteReceipt:function(t,a){return e(function(e,t){return function(){var a=Object(j.a)(O.a.mark(function a(r){return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"REQUEST_INITIALIZED"}),a.prev=1,a.next=4,A.delete("/",{data:{id:e}});case 4:r({type:"DELETE_RECEIPT",id:e}),r({type:p,message:"prijemka bola uspesne odstranena"}),"function"===typeof t&&t(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),r({type:m,error:"nepodarilo sa odstranit prijemku"});case 12:case"end":return a.stop()}},a,this,[[1,9]])}));return function(e){return a.apply(this,arguments)}}()}(t,a))},onSetActiveLink:function(t){return e(L(t))}}})(re),se=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={id:"",identifier:"",company:"",date:"",price:0,error:""},a.inputChangeHandler=function(e){a.setState(Object(W.a)({},e.target.name,e.target.value))},a.formSubmitHandler=function(e){e.preventDefault(),a.validateForm(),a.state.error||(a.state.id?a.props.onUpdateReceipt(a.state.id,a.state.identifier,a.state.company,a.state.date,a.state.price,function(e){a.props.history.replace("/receipts/detail/".concat(e))}):a.props.onAddReceipts(a.state.identifier,a.state.company,a.state.date,a.state.price,function(e){a.props.history.replace("/receipts/detail/".concat(e))}))},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){if(this.props.history.location.search){var e=K(this.props.history.location.search),t=e.id,a=e.identifier,r=e.company,n=e.date,s=e.price;t&&this.setState({id:+t,identifier:a,company:r,price:s,date:n.split("T")[0]})}this.props.onSetActiveLink("receipts_add")}},{key:"validateForm",value:function(){var e,t=this;this.state.id?e=this.props.receipts.filter(function(e){return e.id!==t.state.id}).map(function(e){return e.identifier}):e=this.props.receipts.map(function(e){return e.identifier});e.includes(this.state.identifier)?this.setState({error:"duplicitne ID"}):this.setState({error:""})}},{key:"render",value:function(){return n.a.createElement("div",{className:"wrapper wrapper--md u-margin-top-lg"},n.a.createElement("form",{className:"col-form",onSubmit:this.formSubmitHandler},n.a.createElement("div",{className:"col-form__header"},"Vytvorit prijemku"),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label"},"id"),n.a.createElement("input",{className:"col-form__input",type:"text",value:this.state.identifier,name:"identifier",required:!0,onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label"},"dodavatel"),n.a.createElement("input",{className:"col-form__input",type:"text",value:this.state.company,name:"company",onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label"},"datum"),n.a.createElement("input",{className:"col-form__input",type:"date",value:this.state.date,name:"date",onChange:this.inputChangeHandler,required:!0})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label"},"cena"),n.a.createElement("input",{className:"col-form__input",type:"number",step:.01,value:this.state.price,name:"price",onChange:this.inputChangeHandler,required:!0})),n.a.createElement("div",{className:"col-form__group"},this.state.error?n.a.createElement("p",{className:"col-form__group--error"},this.state.error):null),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("button",{className:"col-form__btn--submit"},"pokracovat"))))}}]),t}(r.Component),ce=Object(l.b)(function(e){return{receipts:e.receipts.items}},function(e){return{onAddReceipts:function(t,a,r,n,s){return e(function(e,t,a,r,n){return function(){var s=Object(j.a)(O.a.mark(function s(c){var o,i;return O.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c({type:"REQUEST_INITIALIZED"}),s.prev=1,o={identifier:e,company:t,date:a,price:r},s.next=5,A.post("",o);case 5:i=s.sent,o.id=i.data.insertId,c({type:"ADD_RECEIPT_HEADER",item:o}),c({type:p,message:"prijemka bola uspesne vytvorena"}),"function"===typeof n&&n(o.id),s.next=15;break;case 12:s.prev=12,s.t0=s.catch(1),c({type:m,error:"nepodarilo sa vytvorit prijemku"});case 15:case"end":return s.stop()}},s,this,[[1,12]])}));return function(e){return s.apply(this,arguments)}}()}(t,a,r,n,s))},onUpdateReceipt:function(t,a,r,n,s,c){return e(function(e,t,a,r,n,s){return function(){var c=Object(j.a)(O.a.mark(function c(o){var i;return O.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o({type:"REQUEST_INITIALIZED"}),c.prev=1,i={id:e,identifier:t,company:a,date:r,price:n},c.next=5,A.post("/update",{receiptId:e,identifier:t,company:a,date:r,price:n});case 5:o({type:"UPDATE_RECEIPT_HEADER",item:i}),o({type:p,message:"prijemka bola uspesne upravena"}),"function"===typeof s&&s(e),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),o({type:m,error:"nepodarilo sa upravit prijemku"});case 13:case"end":return c.stop()}},c,this,[[1,10]])}));return function(e){return c.apply(this,arguments)}}()}(t,a,r,n,s,c))},onSetActiveLink:function(t){return e(L(t))}}})(se),oe=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.issueCards&&this.props.issueCards.length||this.props.onFetchIssueCards(),this.props.onSetActiveLink("issueCards")}},{key:"renderIssueCards",value:function(){return this.props.issueCards?this.props.issueCards.map(function(e){return n.a.createElement("div",{key:e.id,className:"product-box__row"},n.a.createElement("div",{className:"product-box__col"},e.identifier),n.a.createElement("div",{className:"product-box__col"},e.receiver),n.a.createElement("div",{className:"product-box__col"},e.date.split("T")[0]),n.a.createElement("div",{className:"product-box__col"},n.a.createElement(U.a,{className:"btn btn--small",to:"/issue-cards/detail/".concat(e.id)},"detail")))}):null}},{key:"render",value:function(){return n.a.createElement("div",{className:"wrapper u-margin-top-lg"},n.a.createElement("div",{className:"product-box product-box--rounded-top"},n.a.createElement("div",{className:"product-box__row product-box__row--header"},n.a.createElement("div",{className:"product-box__col product-box__col--header"},"id"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"dodavatel"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"datum"),n.a.createElement("div",{className:"product-box__col product-box__col--header"})),this.renderIssueCards()))}}]),t}(r.Component),ie=Object(l.b)(function(e){return{loading:e.app.loading,issueCards:e.issueCards.items}},function(e){return{onFetchIssueCards:function(){return e(H())},onSetActiveLink:function(t){return e(L(t))}}})(oe),le=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={issueCardId:a.props.issueCardId,storeItemId:"",code:"",amount:0,error:"",message:""},a.inputChangeHandler=function(e){var t,r=a.validateForm(e),n=r.error,s=r.message;a.setState((t={},Object(W.a)(t,e.target.name,e.target.value),Object(W.a)(t,"error",n),Object(W.a)(t,"message",s),t))},a.formSubmitHandler=function(e){if(e.preventDefault(),!a.state.error){var t=a.props.storeItems.find(function(e){return e.code===a.state.code});a.props.onAddIssueCardItem(a.state.issueCardId,t.id,a.state.amount,t.name,a.state.code),a.props.hideFormHandler()}},a.createStoreItemHandler=function(e){a.props.onToggleModal(!0)},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.showModal&&!e.showModal){var a=this.validateCode(this.state.code),r=a.error,n=a.message;this.setState({error:r,message:n})}return!0}},{key:"validateCode",value:function(e){var t=this.state.error,a=this.state.message;if(!this.props.storeItems.map(function(e){return e.code}).includes(e)&&e.length>0)t=" ".concat(e," => neexistujuci kod"),a="";else if(e.length>0){t="";var r=this.props.storeItems.find(function(t){return t.code===e});a=" ".concat(r.code," => ").concat(r.name)}else t="",a="";return{error:t,message:a}}},{key:"validateForm",value:function(e){var t=this.state.error,a=this.state.message;return"code"===e.target.name?this.validateCode(e.target.value):{error:t,message:a}}},{key:"renderModal",value:function(){return this.props.showModal?n.a.createElement($,null,n.a.createElement(ee,null,n.a.createElement("div",{className:"wrapper wrapper--md"},n.a.createElement(J,{openedInModal:!0,code:this.state.code})))):null}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.renderModal(),n.a.createElement("div",{className:"row-form__wrapper"},n.a.createElement("form",{className:"row-form",onSubmit:this.formSubmitHandler},n.a.createElement("div",{className:"row-form__row row-form__row--header"},n.a.createElement("label",{className:"row-form__col row-form__col--header"},"kod"),n.a.createElement("label",{className:"row-form__col row-form__col--header"},"mnozstvo")),n.a.createElement("div",{className:"row-form__row"},n.a.createElement("input",{className:"row-form__col row-form__input",type:"text",name:"code",required:!0,value:this.state.code,onChange:this.inputChangeHandler}),n.a.createElement("input",{className:"row-form__col row-form__input",type:"number",step:1,name:"amount",required:!0,value:this.state.amount,onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"row-form__row"},n.a.createElement("button",{className:"row-form__col row-form__btn--submit",type:"submit"},"potvrdit"))),n.a.createElement("div",{className:"row-form__message"},this.state.error?n.a.createElement("div",{className:"row-form__col row-form__col--error"},n.a.createElement("p",null,this.state.error),n.a.createElement("button",{onClick:this.createStoreItemHandler,className:"row-form__message-btn row-form__message-btn--error"},"vytvorit polozku")):null,this.state.message?n.a.createElement("div",{className:"row-form__col row-form__col--success"},n.a.createElement("p",null,this.state.message)):null)))}}]),t}(r.Component),ue=Object(l.b)(function(e){return{storeItems:e.store.items,showModal:e.app.showModal}},function(e){return{onAddIssueCardItem:function(t,a,r,n,s,c){return e(function(e,t,a,r,n,s){return function(){var c=Object(j.a)(O.a.mark(function c(o){return O.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o({type:"REQUEST_INITIALIZED"}),c.prev=1,c.next=4,M.post("/field",{issueCardId:e,storeItemId:t,amount:a});case 4:o({type:"ADD_ISSUE_CARD_ITEM",issueCardId:e,storeItemId:t,amount:a,name:r,code:n}),o({type:p,message:"polozka bola uspesne pridana"}),o({type:"UPDATE_STORE_ITEM_AMOUNT",id:t,amount:a,increase:!1}),"function"===typeof s&&s(),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),o({type:m,error:"nepodarilo sa pridat polozku"});case 13:case"end":return c.stop()}},c,this,[[1,10]])}));return function(e){return c.apply(this,arguments)}}()}(t,a,r,n,s,c))},onToggleModal:function(t){return e(F(t))}}})(le),de=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={id:+a.props.history.location.pathname.split("/")[3],showForm:!1},a.hideFormHandler=function(){a.setState({showForm:!1})},a.deleteIssueCardHandler=function(){a.props.selectedIssueCard.storeItems&&a.props.selectedIssueCard.storeItems.length?alert("vymazat je mozne iba vydjaku ktora neobsahuje ziadne polozky"):a.props.onDeleteIssueCard(a.state.id,function(){a.props.history.replace("/issue-cards")})},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.issueCards.find(function(t){return t.id===e.state.id});console.log(t),t&&"storeItems"in t?this.props.onChangeSelectedIssueCard(this.state.id):this.props.onFetchIssueCard(this.state.id),this.props.onSetActiveLink("issueCards")}},{key:"renderIssueCardStoreItems",value:function(e){var t=this;if(e)return e.map(function(e){return n.a.createElement("div",{key:e.id,className:"product-box__row"},n.a.createElement("div",{className:"product-box__col"},e.code),n.a.createElement("div",{className:"product-box__col"},e.name),n.a.createElement("div",{className:"product-box__col"},e.amount),n.a.createElement("div",{className:"product-box__col"},n.a.createElement("button",{className:"btn btn--danger btn--small",onClick:function(){return t.props.onDeleteIssueCardItem(t.props.selectedIssueCard.id,e.id,e.amount)}},"odstanit")))})}},{key:"renderIssueCard",value:function(){return this.props.selectedIssueCard?n.a.createElement("div",{className:"card u-margin-top-lg"},n.a.createElement("div",{className:"card__header"},n.a.createElement("div",{className:"card__group u-margin-top-xsm"},n.a.createElement("p",{className:"card__text card__group--left"},"id: "),n.a.createElement("p",{className:"card__text card__group--right"},this.props.selectedIssueCard.identifier)),n.a.createElement("div",{className:"card__group"},n.a.createElement("p",{className:"card__text card__group--left"},"odoberatel:"),n.a.createElement("p",{className:"card__text card__group--right"},this.props.selectedIssueCard.receiver)),n.a.createElement("div",{className:"card__group"},n.a.createElement("p",{className:"card__text card__group--left"},"datum:"),n.a.createElement("p",{className:"card__text card__group--right"},this.props.selectedIssueCard.date?this.props.selectedIssueCard.date.split("T")[0]:null)),n.a.createElement(U.a,{className:"btn u-margin-left-sm u-margin-top-sm",to:"/issue-cards/add?id=".concat(this.props.selectedIssueCard.id,"&identifier=").concat(this.props.selectedIssueCard.identifier,"&date=").concat(this.props.selectedIssueCard.date,"&receiver=").concat(this.props.selectedIssueCard.receiver)},"upravit hlavicku"),n.a.createElement("button",{className:"btn btn--danger u-margin-left-xsm u-margin-top-sm",onClick:this.deleteIssueCardHandler},"odstanit vydajku")),n.a.createElement("div",{className:"product-box"},n.a.createElement("div",{className:"product-box__row product-box__row--header"},n.a.createElement("div",{className:"product-box__col product-box__col--header"},"kod"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"nazov"),n.a.createElement("div",{className:"product-box__col product-box__col--header"},"mnozstvo"),n.a.createElement("div",{className:"product-box__col product-box__col--header"})),this.renderIssueCardStoreItems(this.props.selectedIssueCard.storeItems))):null}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.renderIssueCard(),n.a.createElement("div",{className:"wrapper u-margin-top-md"},this.state.showForm?n.a.createElement(ue,{issueCardId:this.props.selectedIssueCard.id,hideFormHandler:this.hideFormHandler}):null,n.a.createElement("button",{className:"btn btn--outline-blue u-margin-top-xsm",onClick:function(){return e.setState(function(e){return{showForm:!e.showForm}})}},this.state.showForm?"skryt formular":"pridat polozku")))}}]),t}(r.Component),me=Object(l.b)(function(e){return{loading:e.app.loading,issueCards:e.issueCards.items,selectedIssueCard:e.issueCards.selectedItem}},function(e){return{onFetchIssueCard:function(t){return e(function(e){return function(){var t=Object(j.a)(O.a.mark(function t(a){var r;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_INITIALIZED"}),t.prev=1,t.next=4,M("/".concat(e));case 4:r=t.sent,a({type:"FETCH_ISSUE_CARD",item:r.data}),a({type:p,message:""}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:m,error:"nepodarilo sa ziskat data"});case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()}(t))},onFetchIssueCards:function(){return e(H())},onChangeSelectedIssueCard:function(t){return e(function(e){return{type:"CHANGE_SELECTED_ISSUE_CARD",id:e}}(t))},onDeleteIssueCardItem:function(t,a,r){return e(function(e,t,a){return function(){var r=Object(j.a)(O.a.mark(function r(n){var s;return O.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:"REQUEST_INITIALIZED"}),r.prev=1,s={issueCardId:e,storeItemId:t},r.next=5,M.delete("/field",{data:s});case 5:n(Object(d.a)({type:"DELETE_ISSUE_CARD_ITEM"},s)),n({type:p,message:"polozka bola uspesne odstranena"}),n({type:"UPDATE_STORE_ITEM_AMOUNT",id:t,amount:a,increase:!0}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),n({type:m,error:"nepodarilo sa odstranit polozku"});case 13:case"end":return r.stop()}},r,this,[[1,10]])}));return function(e){return r.apply(this,arguments)}}()}(t,a,r))},onDeleteIssueCard:function(t,a){return e(function(e,t){return function(){var a=Object(j.a)(O.a.mark(function a(r){return O.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"REQUEST_INITIALIZED"}),a.prev=1,a.next=4,M.delete("/",{data:{id:e}});case 4:r({type:"DELETE_ISSUE_CARD",id:e}),r({type:p,message:"vydajka bola uspesne odstranena"}),"function"===typeof t&&t(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),r({type:m,error:"nepodarilo sa odstranit vydajku"});case 12:case"end":return a.stop()}},a,this,[[1,9]])}));return function(e){return a.apply(this,arguments)}}()}(t,a))},onSetActiveLink:function(t){return e(L(t))}}})(de),pe=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={id:"",identifier:"",receiver:"",date:"",error:""},a.inputChangeHandler=function(e){a.setState(Object(W.a)({},e.target.name,e.target.value))},a.formSubmitHandler=function(e){e.preventDefault(),a.validateForm(),a.state.error||(a.state.id?a.props.onUpdateIssueCard(a.state.id,a.state.identifier,a.state.receiver,a.state.date,function(e){a.props.history.replace("/issue-cards/detail/".concat(e))}):a.props.onAddIssueCard(a.state.identifier,a.state.receiver,a.state.date,function(e){a.props.history.replace("/issue-cards/detail/".concat(e))}))},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){if(this.props.history.location.search){var e=K(this.props.history.location.search),t=e.id,a=e.identifier,r=e.receiver,n=e.date;t&&this.setState({id:+t,identifier:a,receiver:r,date:n.split("T")[0]})}this.props.onSetActiveLink("issueCards_add")}},{key:"validateForm",value:function(){var e,t=this;this.state.id?e=this.props.issueCards.filter(function(e){return e.id!==t.state.id}).map(function(e){return e.identifier}):e=this.props.issueCards.map(function(e){return e.identifier});e.includes(this.state.identifier)?this.setState({error:"duplicitne ID"}):this.setState({error:""})}},{key:"render",value:function(){return n.a.createElement("div",{className:"wrapper wrapper--md u-margin-top-lg"},n.a.createElement("form",{className:"col-form",onSubmit:this.formSubmitHandler},n.a.createElement("div",{className:"col-form__header"},"Vytvorit vydajku"),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label"},"id"),n.a.createElement("input",{className:"col-form__input",type:"text",value:this.state.identifier,name:"identifier",required:!0,onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label"},"odoberatel"),n.a.createElement("input",{className:"col-form__input",type:"text",value:this.state.receiver,name:"receiver",onChange:this.inputChangeHandler})),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("label",{className:"col-form__label"},"datum"),n.a.createElement("input",{className:"col-form__input",type:"date",value:this.state.date,name:"date",onChange:this.inputChangeHandler,required:!0})),n.a.createElement("div",{className:"col-form__group"},this.state.error?n.a.createElement("p",{className:"col-form__group--error"},this.state.error):null),n.a.createElement("div",{className:"col-form__group"},n.a.createElement("button",{className:"col-form__btn--submit"},"pokracovat"))))}}]),t}(r.Component),_e=Object(l.b)(function(e){return{issueCards:e.issueCards.items}},function(e){return{onAddIssueCard:function(t,a,r,n){return e(function(e,t,a,r){return function(){var n=Object(j.a)(O.a.mark(function n(s){var c,o;return O.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s({type:"REQUEST_INITIALIZED"}),n.prev=1,c={identifier:e,receiver:t,date:a},n.next=5,M.post("",c);case 5:o=n.sent,c.id=o.data.insertId,s({type:"ADD_ISSUE_CARD_HEADER",item:c}),s({type:p,message:"vydajka bola uspesne vytvorena"}),"function"===typeof r&&r(c.id),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),s({type:m,error:"nepodarilo sa vytvorit vydajku"});case 15:case"end":return n.stop()}},n,this,[[1,12]])}));return function(e){return n.apply(this,arguments)}}()}(t,a,r,n))},onUpdateIssueCard:function(t,a,r,n,s){return e(function(e,t,a,r,n){return function(){var s=Object(j.a)(O.a.mark(function s(c){var o;return O.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return c({type:"REQUEST_INITIALIZED"}),s.prev=1,o={id:e,identifier:t,receiver:a,date:r},s.next=5,M.post("/update",{issueCardId:e,identifier:t,receiver:a,date:r});case 5:c({type:"UPDATE_ISSUE_CARD_HEADER",item:o}),c({type:p,message:"vydajka bola uspesne upravena"}),"function"===typeof n&&n(e),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),c({type:m,error:"nepodarilo sa upravit vydajku"});case 13:case"end":return s.stop()}},s,this,[[1,10]])}));return function(e){return s.apply(this,arguments)}}()}(t,a,r,n,s))},onSetActiveLink:function(t){return e(L(t))}}})(pe),fe=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.onSetActiveLink("/")}},{key:"render",value:function(){return n.a.createElement("div",{className:"landing"},n.a.createElement("div",{className:"landing__item landing__item--1"},n.a.createElement("h1",{className:"landing__header"},"SKLAD"),n.a.createElement("div",{className:"landing__body"},n.a.createElement("div",null,n.a.createElement(U.a,{className:"landing__link",to:"/store"},"skladove polozky")),n.a.createElement("div",null,n.a.createElement(U.a,{className:"landing__link",to:"/store/add-item"},"pridat polozku")))),n.a.createElement("div",{className:"landing__item landing__item--2"},n.a.createElement("h1",{className:"landing__header"},"PRIJEMKY"),n.a.createElement("div",{className:"landing__body"},n.a.createElement("div",null,n.a.createElement(U.a,{className:"landing__link",to:"/receipts"},"zobrazit prijemky")),n.a.createElement("div",null,n.a.createElement(U.a,{className:"landing__link",to:"/receipts/add"},"vytvorit prijemku")))),n.a.createElement("div",{className:"landing__item landing__item--3"},n.a.createElement("h1",{className:"landing__header"},"VYDAJKY"),n.a.createElement("div",{className:"landing__body"},n.a.createElement("div",null,n.a.createElement(U.a,{className:"landing__link",to:"/issue-cards"},"zobrazit vydajky")),n.a.createElement("div",null,n.a.createElement(U.a,{className:"landing__link",to:"/issue-cards/add"},"vytvorit vydajku")))))}}]),t}(r.Component),he=Object(l.b)(null,function(e){return{onSetActiveLink:function(t){return e(L(t))}}})(fe),ve={NAME:"NAME",CODE:"CODE"};var Ee=function(e){function t(){var e,a;Object(b.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={opened:!1,searchString:"",found:[],searchBy:ve.NAME},a.inputChangeHandler=function(e){var t=a.findItems(e.target.value,a.state.searchBy);a.setState({searchString:e.target.value,found:t})},a.changeSearchHandler=function(e){if(e!==a.state.searchBy){var t;a.state.searchBy===ve.CODE?t=ve.NAME:a.state.searchBy===ve.NAME&&(t=ve.CODE);var r=a.findItems(a.state.searchString,t);a.setState({searchBy:e,found:r})}},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"findItems",value:function(e,t){var a=[];return t===ve.NAME?a=function(e,t){e=e.toLowerCase();var a=[];return e.length>=3&&t.map(function(e){return{name:e.name.toLowerCase(),code:e.code.toUpperCase(),available:e.available}}).forEach(function(t){t.name.includes(e)&&a.push(t)}),a}(e,this.props.items):t===ve.CODE&&(a=function(e,t){e=e.toUpperCase();var a=[];return e.length>=3&&t.map(function(e){return{name:e.name.toLowerCase(),code:e.code.toUpperCase(),available:e.available}}).forEach(function(t){t.code.includes(e)&&a.push(t)}),a}(e,this.props.items)),a}},{key:"renderFoundItems",value:function(){return this.state.found.map(function(e){return n.a.createElement("div",{key:e.id,className:"search-code__row"},n.a.createElement("div",{className:"search-code__col"},e.code),n.a.createElement("div",{className:"search-code__col"},e.name),n.a.createElement("div",{className:"search-code__col"},e.available))})}},{key:"renderFoundItemsBox",value:function(){return this.state.found.length?n.a.createElement("div",{className:"search-code__result"},n.a.createElement("div",{className:"search-code__row search-code__row--header"},n.a.createElement("div",{className:"search-code__col"},"kod"),n.a.createElement("div",{className:"search-code__col"},"nazov"),n.a.createElement("div",{className:"search-code__col"},"mnozstvo")),this.renderFoundItems()):null}},{key:"renderForm",value:function(){var e=this;return this.state.opened?n.a.createElement("div",{className:"search-code__wrapper"},this.renderFoundItemsBox(),n.a.createElement("div",{className:"search-code__header"},n.a.createElement("button",{onClick:function(){return e.setState({opened:!1})},className:"search-code__close-btn"},"X"),n.a.createElement("div",{className:"search-code__buttons"},n.a.createElement("button",{onClick:this.changeSearchHandler.bind(null,ve.NAME),className:this.state.searchBy===ve.NAME?"btn btn--small ":"btn btn--small btn--outline-violet"},"nazov"),n.a.createElement("button",{onClick:this.changeSearchHandler.bind(null,ve.CODE),className:this.state.searchBy===ve.CODE?"btn btn--small u-margin-left-xsm":"btn btn--small u-margin-left-xsm btn--outline-violet"},"kod")),n.a.createElement("input",{placeholder:"min. 3 znaky",value:this.state.searchString,onChange:this.inputChangeHandler,name:"searchString",className:"search-code__input",type:"text",autoFocus:!0}))):null}},{key:"renderOpenButton",value:function(){var e=this;return this.state.opened?null:n.a.createElement("button",{onClick:function(){return e.setState({opened:!0})},className:"btn"},"vyhladat polozku")}},{key:"render",value:function(){return n.a.createElement("div",{className:"search-code"},this.renderOpenButton(),this.renderForm())}}]),t}(r.Component),be=Object(l.b)(function(e){return{items:e.store.items}})(Ee),Ie=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.items&&this.props.items.length||this.props.onFetchStoreData(),this.props.issueCards&&this.props.issueCards.length||this.props.onFetchIssueCards()}},{key:"renderError",value:function(){return this.props.error?n.a.createElement("div",{className:"flash-message flash-message--error"},this.props.error,n.a.createElement("button",{className:"flash-message__btn",onClick:this.props.onDismissError},"X")):null}},{key:"renderMessage",value:function(){return this.props.message?n.a.createElement("div",{className:"flash-message flash-message--success"},this.props.message,n.a.createElement("button",{className:"flash-message__btn",onClick:this.props.onDismissMessage},"X")):null}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(k.a,null,n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"container__left"},n.a.createElement(Q,null)),n.a.createElement("div",{className:"container__right"},this.renderError(),this.renderMessage(),n.a.createElement(C.a,{exact:!0,path:"/",component:he}),n.a.createElement(C.a,{exact:!0,path:"/store",component:G}),n.a.createElement(C.a,{path:"/store/add-item",component:J}),n.a.createElement(C.a,{exact:!0,path:"/receipts",component:Y}),n.a.createElement(C.a,{path:"/receipts/add",component:ce}),n.a.createElement(C.a,{path:"/receipts/detail/:id",component:ne}),n.a.createElement(C.a,{exact:!0,path:"/issue-cards",component:ie}),n.a.createElement(C.a,{path:"/issue-cards/add",component:_e}),n.a.createElement(C.a,{path:"/issue-cards/detail/:id",component:me})),n.a.createElement(be,null))))}}]),t}(r.Component),ge=Object(l.b)(function(e){return{error:e.app.error,message:e.app.message,storeItems:e.store.items,issueCards:e.issueCards.items}},function(e){return{onDismissError:function(){return e({type:"DISMISS_ERROR"})},onDismissMessage:function(){return e({type:"DISMISS_MESSAGE"})},onFetchStoreData:function(){return e(D())},onFetchIssueCards:function(){return e(H())}}})(Ie),ye=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,Ne=Object(i.e)(E,ye(Object(i.a)(o.a))),ke=n.a.createElement(l.a,{store:Ne},n.a.createElement(ge,null));c.a.render(ke,document.getElementById("root"))}},[[36,2,1]]]);
//# sourceMappingURL=main.e1237ba0.chunk.js.map